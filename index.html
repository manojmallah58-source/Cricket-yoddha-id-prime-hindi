<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>CRICKET YODDHA - Premium Live</title>
  
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@600;700;800&family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --bg-dark: #050505;
      --bg-card: #111111;
      --gold-main: #FFD700;
      --gold-glow: rgba(255, 215, 0, 0.4);
      --text-white: #ffffff;
      --text-gray: #b0b0b0;
      --border-color: rgba(255, 255, 255, 0.08);
      --accent-red: #ff3b3b;
      --gradient-bg-top: #1a1500; /* Darker top for subtle gradient */
      --gradient-bg-bottom: #000000;
    }

    * { 
      box-sizing: border-box; 
      -webkit-tap-highlight-color: transparent; 
      outline: none; 
      user-select: none; 
      -webkit-touch-callout: none; /* Disable callouts on iOS */
      -webkit-text-size-adjust: 100%; /* Prevent text zoom on orientation change */
    }
    
    body {
      margin: 0; padding: 0;
      background-color: var(--bg-dark);
      background-image: radial-gradient(circle at top center, var(--gradient-bg-top), var(--gradient-bg-bottom) 60%);
      font-family: 'Outfit', sans-serif;
      color: var(--text-white);
      padding-bottom: 80px;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* SCROLLBAR for desktop browsers */
    body::-webkit-scrollbar { width: 8px; }
    body::-webkit-scrollbar-track { background: var(--bg-dark); }
    body::-webkit-scrollbar-thumb { background-color: #333; border-radius: 10px; border: 2px solid var(--bg-dark); }
    body::-webkit-scrollbar-thumb:hover { background-color: #555; }

    /* HEADER */
    header {
      position: fixed; top: 0; width: 100%; height: 65px; /* Slightly taller */
      background: rgba(5, 5, 5, 0.9); /* Slightly less transparent */
      backdrop-filter: blur(15px); /* More blur */
      border-bottom: 1px solid var(--border-color);
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 18px; /* More padding */
      z-index: 1000;
      box-shadow: 0 6px 25px rgba(0,0,0,0.6); /* Stronger shadow */
    }

    .menu-icon { font-size: 28px; color: #fff; cursor: pointer; transition: 0.2s transform, 0.2s color; }
    .menu-icon:active { color: var(--gold-main); transform: scale(0.9); }
    
    .logo-container { 
      position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); 
      display: flex; align-items: center; gap: 8px;
    }
    /* Removed logo image, text only as per original HTML structure */
    .logo-text { 
      font-family: 'Rajdhani'; font-weight: 800; font-size: 20px; /* Larger font */
      color: #fff; letter-spacing: 1.5px; /* More spacing */
      text-shadow: 0 0 10px rgba(255,215,0,0.2); /* Subtle glow */
    }
    .logo-text span { color: var(--gold-main); }

    .header-live {
      display: flex; align-items: center; gap: 8px; /* More gap */
      background: rgba(255, 59, 59, 0.15); /* Stronger background */
      border: 1px solid rgba(255, 59, 59, 0.4); /* Stronger border */
      padding: 5px 12px; border-radius: 25px; /* More padding and rounder */
      box-shadow: 0 0 15px rgba(255, 59, 59, 0.3); /* Add shadow */
    }
    .h-dot { 
      width: 8px; height: 8px; background: var(--accent-red); border-radius: 50%; 
      box-shadow: 0 0 10px var(--accent-red), 0 0 20px rgba(255,0,0,0.5); /* Enhanced glow */
      animation: blink 1s infinite cubic-bezier(0.4, 0, 0.6, 1); /* Smoother blink */
    }
    .h-text { font-size: 12px; font-weight: 700; color: var(--accent-red); font-family: 'Rajdhani'; letter-spacing: 0.8px; text-transform: uppercase; }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

    /* VIDEO SECTION */
    .video-wrapper {
      margin-top: 65px; /* Adjust for header height */
      width: 100%; position: relative;
      background: #000;
      box-shadow: 0 12px 35px rgba(0,0,0,0.7); /* Stronger shadow */
      border-bottom-left-radius: 8px; /* Slight roundness */
      border-bottom-right-radius: 8px;
      overflow: hidden; /* Ensure rounded corners clip video */
    }
    .video-container {
      width: 100%; aspect-ratio: 16/9;
      position: relative; overflow: hidden;
      background-color: #000; /* Ensure black background if video delays */
    }
    .video-container iframe { 
      width: 100%; height: 100%; border: none; display: block; 
      /* Ensure no extra padding/margin */
    }
    
    /* Elegant Bottom Border for Video */
    .video-bar { 
      height: 4px; /* Thicker */
      width: 100%; 
      background: linear-gradient(90deg, transparent 5%, var(--gold-main), #e6c200, transparent 95%); 
      opacity: 0.8; 
      box-shadow: 0 0 15px var(--gold-glow); /* Add glow */
    }

    /* TICKER */
    .ticker-wrap {
      background: #0a0a0a; height: 35px; /* Slightly taller */
      overflow: hidden;
      display: flex; align-items: center; border-bottom: 1px solid var(--border-color);
      position: relative;
      padding: 0 10px; /* Add some padding */
    }
    .ticker-wrap::before, .ticker-wrap::after {
      content: ''; position: absolute; top: 0; bottom: 0; width: 30px; z-index: 2; /* Wider fade */
      pointer-events: none;
    }
    .ticker-wrap::before { left: 0; background: linear-gradient(90deg, #0a0a0a 20%, transparent); }
    .ticker-wrap::after { right: 0; background: linear-gradient(-90deg, #0a0a0a 20%, transparent); }
    
    .ticker-text {
      color: var(--gold-main); font-weight: 700; font-family: 'Rajdhani'; font-size: 14px; /* Larger font */
      letter-spacing: 0.8px; text-transform: uppercase;
      white-space: nowrap; animation: scroll 30s linear infinite; /* Slower scroll */
      padding-left: 100%; /* Start off-screen */
    }
    @keyframes scroll { 100% { transform: translateX(-100%); } }

    /* MAIN ACTIONS AREA */
    .action-section { padding: 25px 18px; /* More padding */
      max-width: 650px; /* Wider max-width */
      margin: 0 auto;
    }

    /* MODERN STATS CARD */
    .stats-grid {
      display: grid; grid-template-columns: 1fr 1fr; gap: 15px; /* More gap */
      margin-bottom: 30px; /* More margin */
    }
    
    .stat-card {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02)); /* Gradient background */
      border: 1px solid rgba(255, 255, 255, 0.1); /* Stronger border */
      border-radius: 20px; /* Rounder */
      padding: 20px; /* More padding */
      position: relative; overflow: hidden;
      display: flex; flex-direction: column; justify-content: center;
      backdrop-filter: blur(8px); /* More blur */
      box-shadow: 0 8px 25px rgba(0,0,0,0.3); /* Add shadow */
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .stat-card:active { transform: translateY(2px); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }

    .stat-card::after {
      content: ''; position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; /* Larger effect */
      background: radial-gradient(circle, rgba(255,215,0,0.15) 0%, transparent 70%); /* Stronger glow */
      pointer-events: none;
      transform: rotate(45deg); /* Slight rotation */
    }

    .stat-header { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
    .stat-icon { font-size: 18px; color: var(--gold-main); text-shadow: 0 0 5px var(--gold-glow); }
    .stat-title { font-size: 12px; color: var(--text-gray); text-transform: uppercase; letter-spacing: 0.8px; font-weight: 700; }
    
    .stat-value { 
      font-size: 32px; /* Larger value */
      font-weight: 800; color: #fff; font-family: 'Rajdhani'; line-height: 1.2; 
      text-shadow: 0 0 8px rgba(255,255,255,0.2);
    }
    .live-badge { 
      font-size: 10px; color: var(--accent-red); background: rgba(255,0,0,0.15); 
      padding: 3px 8px; border-radius: 6px; display: inline-block; margin-left: auto; font-weight: 700;
      border: 1px solid rgba(255,0,0,0.3);
      text-shadow: 0 0 5px rgba(255,0,0,0.2);
    }

    /* BUTTONS */
    .btn-group { display: flex; flex-direction: column; gap: 15px; /* More gap */ }

    .btn-main {
      display: flex; align-items: center; justify-content: space-between;
      padding: 18px 22px; /* More padding */
      border-radius: 16px; /* Rounder */
      text-decoration: none;
      background: linear-gradient(45deg, var(--gold-main), #e6c200); /* Angle gradient */
      box-shadow: 0 6px 20px rgba(255, 215, 0, 0.35); /* Stronger shadow */
      transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease; /* Pop effect */
      position: relative;
      overflow: hidden;
    }
    .btn-main::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(45deg, rgba(255,255,255,0.1), transparent 50%, rgba(255,255,255,0.1));
      opacity: 0;
      transition: opacity 0.2s ease;
    }
    .btn-main:active { 
      transform: scale(0.98); 
      box-shadow: 0 3px 10px rgba(255, 215, 0, 0.2); 
    }
    .btn-main:active::before { opacity: 1; }
    
    .btn-content { display: flex; align-items: center; gap: 15px; }
    .btn-icon-circle { 
      width: 40px; height: 40px; background: rgba(0,0,0,0.15); border-radius: 50%;
      display: flex; align-items: center; justify-content: center; 
      box-shadow: inset 0 0 10px rgba(0,0,0,0.2); /* Inner shadow */
    }
    .btn-icon-circle i { color: #000; font-size: 22px; margin-right: 1px; margin-top: 1px;} 
    
    .btn-text h3 { margin: 0; color: #000; font-size: 16px; font-weight: 800; font-family: 'Rajdhani'; text-transform: uppercase; letter-spacing: 0.5px; }
    .btn-text p { margin: 0; color: #333; font-size: 11px; font-weight: 600; text-transform: uppercase; }
    .btn-arrow { color: #000; font-size: 24px; }

    .btn-secondary-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .btn-sec {
      background: #181818; border: 1px solid rgba(255, 255, 255, 0.1); /* Stronger border */
      padding: 14px; border-radius: 14px; /* Rounder */
      text-decoration: none;
      display: flex; align-items: center; justify-content: center; gap: 10px; /* More gap */
      transition: background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    .btn-sec:active { 
      background: #282828; 
      transform: translateY(1px); 
      box-shadow: 0 2px 8px rgba(0,0,0,0.15); 
    }
    .btn-sec i { font-size: 20px; color: #999; } /* Darker icon */
    .btn-sec span { font-size: 13px; color: #eee; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }

    /* POPUP */
    .modal-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.9); /* Darker overlay */
      z-index: 9999; display: flex; align-items: center; justify-content: center;
      opacity: 0; pointer-events: none; transition: 0.5s ease-in-out; backdrop-filter: blur(10px); /* More blur */
    }
    .modal-overlay.active { opacity: 1; pointer-events: auto; }

    .modal-box {
      width: 90%; max-width: 360px; /* Slightly larger */
      background: linear-gradient(135deg, #181818, #0a0a0a); /* Gradient background */
      border: 1px solid #333;
      border-radius: 30px; /* More rounded */
      padding: 35px 30px; /* More padding */
      text-align: center;
      box-shadow: 0 25px 60px rgba(0,0,0,0.7); /* Stronger shadow */
      transform: scale(0.8); transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .modal-overlay.active .modal-box { transform: scale(1); }

    .pop-icon { 
      width: 70px; height: 70px; background: rgba(255, 215, 0, 0.15); /* Stronger background */
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      margin: 0 auto 20px; /* More margin */
      box-shadow: 0 0 20px rgba(255,215,0,0.3); /* Add glow */
    }
    .pop-icon i { font-size: 36px; color: var(--gold-main); text-shadow: 0 0 8px var(--gold-main); }
    
    .pop-title { 
      color: #fff; font-size: 22px; font-weight: 800; margin: 0 0 10px; 
      font-family: 'Rajdhani'; letter-spacing: 0.8px; text-transform: uppercase;
    }
    .pop-desc { color: #aaa; font-size: 14px; margin-bottom: 30px; line-height: 1.6; }

    .pop-btn {
      display: block; width: 100%; padding: 16px; border-radius: 14px; /* Rounder and more padding */
      text-decoration: none; font-weight: 700; font-size: 15px; 
      transition: 0.2s ease; cursor: pointer;
      text-transform: uppercase; letter-spacing: 0.5px;
    }
    .pb-join { 
      background: var(--gold-main); color: #000; margin-bottom: 12px; 
      box-shadow: 0 5px 20px rgba(255,215,0,0.3); 
    }
    .pb-join:active { background: #e6c200; transform: translateY(1px); box-shadow: 0 3px 10px rgba(255,215,0,0.2); }

    .pb-close { 
      background: transparent; color: #888; border: 1px solid #444; 
    }
    .pb-close:active { background: #2f2f2f; color: #fff; border-color: #555; transform: translateY(1px); }

    /* SIDEBAR */
    .sidebar {
      position: fixed; left: -100%; top: 0; width: 300px; height: 100%; /* Wider sidebar */
      background: linear-gradient(180deg, #1a1a1a, #0a0a0a); /* Gradient background */
      z-index: 5000; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border-right: 1px solid #282828;
      box-shadow: 5px 0 30px rgba(0,0,0,0.7); /* Shadow for depth */
    }
    .sidebar.open { left: 0; }
    .sb-header { padding: 35px 30px; border-bottom: 1px solid #282828; background: #0e0e0e; }
    .sb-logo { 
      font-family: 'Rajdhani'; font-size: 26px; font-weight: 800; color: #fff; 
      letter-spacing: 1.5px;
      text-shadow: 0 0 10px rgba(255,215,0,0.2);
    }
    .sb-logo span { color: var(--gold-main); }

    .sb-link {
      display: flex; align-items: center; gap: 18px; padding: 20px 30px; /* More padding */
      color: #ccc; text-decoration: none; font-size: 15px; font-weight: 500;
      transition: 0.2s ease; border-bottom: 1px solid #1f1f1f;
      text-transform: uppercase; letter-spacing: 0.5px;
    }
    .sb-link:last-child { border-bottom: none; } /* No border on last item */
    .sb-link:active { 
      background: #252525; color: var(--gold-main); 
      transform: translateX(5px); /* Slight slide effect */
    }
    .sb-link i { color: #777; font-size: 22px; transition: 0.2s; }
    .sb-link:active i { color: var(--gold-main); }
    
    .overlay { 
      position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 4999; 
      opacity: 0; pointer-events: none; transition: 0.4s ease; 
    }
    .overlay.active { opacity: 1; pointer-events: auto; }

    /* MEDIA QUERIES for larger screens */
    @media (min-width: 768px) {
      header {
        padding: 0 30px;
      }
      .logo-text {
        font-size: 24px;
      }
      .h-text {
        font-size: 13px;
      }
      .action-section {
        padding: 30px 20px;
      }
      .stat-card {
        padding: 25px;
      }
      .stat-value {
        font-size: 38px;
      }
      .btn-main, .btn-sec {
        padding: 20px 25px;
      }
      .btn-text h3 {
        font-size: 18px;
      }
      .btn-text p {
        font-size: 12px;
      }
      .sidebar {
        width: 350px;
      }
    }
  </style>
</head>
<body>

  <!-- POPUP -->
  <div class="modal-overlay" id="popup">
    <div class="modal-box">
      <div class="pop-icon"><i class="material-icons">telegram</i></div>
      <div class="pop-title">Join for Backup Links!</div>
      <div class="pop-desc">Don't miss a single ball. Join our official channel for HD links and live updates.</div>
      <a href="#" id="pop-link" class="pop-btn pb-join">Join Telegram Channel</a>
      <button class="pop-btn pb-close" onclick="closePopup()">I'm already in</button>
    </div>
  </div>

  <!-- HEADER -->
  <header>
    <div class="menu-icon material-icons" onclick="toggleMenu()">notes</div>
    <div class="logo-container">
      <span class="logo-text">CRICKET <span> YODDHA</span></span>
    </div>
    <div class="header-live">
      <div class="h-dot"></div> <span class="h-text">LIVE</span>
    </div>
  </header>

  <!-- SIDEBAR -->
  <div class="sidebar" id="sidebar">
    <div class="sb-header">
      <div class="sb-logo">CRICKET<span>YODDHA</span></div>
    </div>
    <a href="#" id="side-tg" class="sb-link"><i class="material-icons">send</i> Join Telegram</a>
    <a href="#" id="side-instagram" class="sb-link"><i class="material-icons">support_agent</i> Customer Support</a>
    <a href="javascript:location.reload()" class="sb-link"><i class="material-icons">refresh</i> Refresh Page</a>
    <a href="javascript:sharePage()" class="sb-link"><i class="material-icons">share</i> Share App</a>
  </div>
  <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

  <!-- VIDEO -->
  <div class="video-wrapper">
    <div class="video-container">
      <iframe src="https://manojmallah89-tech.github.io/Prime-hindi/" allowfullscreen allow="autoplay; encrypted-media" scrolling="no"></iframe>
    </div>
    <div class="video-bar"></div>
  </div>

  <!-- TICKER -->
  <div class="ticker-wrap">
    <div class="ticker-text">
       WELCOME TO CRICKET YODDHA üèè | JOIN TELEGRAM FOR MORE LINKS üîó | SHARE THIS LINK WITH FRIENDS üî• | NO BUFFERING HD STREAM
    </div>
  </div>

  <!-- ACTIONS -->
  <div class="action-section">
    
    <!-- STATS GRID -->
    <div class="stats-grid">
      <!-- Live Watching Card -->
      <div class="stat-card">
        <div class="stat-header">
          <i class="material-icons stat-icon">visibility</i>
          <span class="stat-title">Watching</span>
          <span class="live-badge">LIVE</span>
        </div>
        <div class="stat-value" id="live-viewer-count">...</div>
      </div>

      <!-- Total Views Card -->
      <div class="stat-card">
        <div class="stat-header">
          <i class="material-icons stat-icon">bar_chart</i>
          <span class="stat-title">Daily Views</span>
        </div>
        <div class="stat-value" id="total-views-count">...</div>
      </div>
    </div>

    <!-- MAIN BUTTONS -->
    <div class="btn-group">
      <a href="#" id="main-btn" class="btn-main">
        <div class="btn-content">
          <div class="btn-icon-circle"><i class="material-icons">send</i></div>
          <div class="btn-text">
            <h3>Join Telegram</h3>
            <p>For Link Backups & Updates</p>
          </div>
        </div>
        <i class="material-icons btn-arrow">chevron_right</i>
      </a>

      <div class="btn-secondary-grid">
        <a href="javascript:void(0)" onclick="sharePage()" class="btn-sec">
          <i class="material-icons">share</i>
          <span>Share</span>
        </a>
        <a href="javascript:location.reload()" class="btn-sec">
          <i class="material-icons">refresh</i>
          <span>Refresh</span>
        </a>
      </div>
    </div>

  </div>

  <!-- FIREBASE LOGIC -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script>
    // ================= CONFIG =================
    // IMPORTANT: Changed WEBSITE_ID to a generic name to group stats, 
    // but DB paths below are changed to 'status_live_new_v2' to reset counters.
    const WEBSITE_ID = "channel_prime_hindi"; 
    const TELEGRAM_LINK = "https://t.me/+rwZKMV0-L8wyOTll";
    const INSTAGRAM_LINK = "https://www.instagram.com/cricket_yoddha?igsh=MWpoZDltdjZzYnRncw=="; // Your provided Instagram link
    // ==========================================

    document.getElementById('pop-link').href = TELEGRAM_LINK;
    document.getElementById('side-tg').href = TELEGRAM_LINK;
    document.getElementById('main-btn').href = TELEGRAM_LINK;
    // Update customer support link to Instagram
    document.getElementById('side-instagram').href = INSTAGRAM_LINK;


    function toggleMenu() {
      document.getElementById('sidebar').classList.toggle('open');
      document.getElementById('overlay').classList.toggle('active');
    }

    // Popup Logic
    window.onload = () => {
      setTimeout(() => {
        if(!sessionStorage.getItem('pop_shown_' + WEBSITE_ID)) {
          document.getElementById('popup').classList.add('active');
        }
      }, 2500);
    };

    function closePopup() {
      document.getElementById('popup').classList.remove('active');
      sessionStorage.setItem('pop_shown_' + WEBSITE_ID, 'true');
    }

    async function sharePage() {
      if(navigator.share) await navigator.share({title:'Watch Live Cricket HD', text: 'Watch Live Cricket HD without buffering!', url: window.location.href});
      else {
        // Fallback for browsers that don't support Web Share API
        const dummy = document.createElement("textarea");
        document.body.appendChild(dummy);
        dummy.value = window.location.href;
        dummy.select();
        document.execCommand("copy");
        document.body.removeChild(dummy);
        alert("Link copied to clipboard!");
      }
    }

    // --- FIREBASE CONFIG ---
    const firebaseConfig = {
      apiKey: "AIzaSyA-vR50CMDYJVHApJir-6fmgRqhFiqQDU8",
      authDomain: "my-website-cricket.firebaseapp.com",
      databaseURL: "https://my-website-cricket-default-rtdb.firebaseio.com",
      projectId: "my-website-cricket",
      storageBucket: "my-website-cricket.appspot.com",
      messagingSenderId: "664276981494",
      appId: "1:664276981494:web:4d6b5cd5c55f6b6b18fed7"
    };

    if(!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // 1. IMPROVED REAL-TIME WATCHING LOGIC
    // Changed path to 'status_live_new_v2' to ensure a fresh start for accurate counting.
    const liveRef = db.ref('status_live_new_v2/' + WEBSITE_ID);
    const connectedRef = db.ref('.info/connected');

    connectedRef.on('value', (snap) => {
      if (snap.val() === true) {
        // Create a unique reference for this user session
        const userRef = liveRef.push();
        
        // Remove this specific reference when user disconnects
        userRef.onDisconnect().remove();
        
        // Set value with timestamp. 'online' status is implicit if entry exists.
        userRef.set(firebase.database.ServerValue.TIMESTAMP); // Store just timestamp for efficiency
      }
    });

    // Count live users accurately
    liveRef.on('value', (snap) => {
      // Use setTimeout to allow Firebase a moment to process onDisconnect events,
      // which can help with more accurate counts during rapid refreshes/disconnections.
      setTimeout(() => {
        const count = snap.numChildren();
        // If count is 0, display 1 to account for the current user if they are the first.
        const displayCount = count < 1 ? 1 : count;
        document.getElementById('live-viewer-count').innerText = displayCount.toLocaleString();
      }, 500); // 500ms delay
    });

    // 2. DAILY VISITORS LOGIC
    const todayStr = new Date().toISOString().slice(0, 10); 
    const visitRef = db.ref('daily_stats_v2/' + WEBSITE_ID + '/' + todayStr);
    const localKey = 'visited_' + WEBSITE_ID + '_' + todayStr;

    // Increment only once per day per user
    if(!localStorage.getItem(localKey)) {
      visitRef.transaction(current => (current || 0) + 1);
      localStorage.setItem(localKey, 'true');
    }

    visitRef.on('value', (snap) => {
      document.getElementById('total-views-count').innerText = (snap.val() || 0).toLocaleString();
    });

  </script>
</body>
</html>
